# Как использовать

1. Получить **FAQBuilder** с помощью статичного метода **Webim.newFAQBuilder()**;
2. Установить название аккаунта с помощью метода **setAccountName(String accountName)** экземляра класса **FAQBuilder** и **Context**, который необходим для кэширования данных в локальную базу данных, с помощью метода **setContext(Context context)**;
3. Получить экземпляр протокола **FAQ** с помощью метода **build()** экземляра класса **FAQBuilder**;
4. Для возможности обращения к серверу необходимо вызывать метод **resume()** экземпляра класса **FAQ**;
5. Далее можно вызывать все методы интерфейса **FAQ**.

Пример использования:
```
FAQ faq = Webim.newFAQBuilder().setAccountName("accountName").setContext(this.getContext()).build();
faq.resume();
```

# FAQBuilder newFAQBuilder() класса Webim
Метод, необходимый для получения объекта **FAQBuilder**, который в свою очередь необходим для создания экземпляра класса **FAQ**.

Возвращает экземпляр класса **FAQBuilder**, необходимый для работы с блоком часто задаваемых вопросов.

# класс FAQBuilder
Класс, экземпляр которого используется для получения экземпляра класса **FAQ**. Экземпляр класса получается методом **newFAQBuilder()** класса **Webim**.

## `FAQBuilder setAccountName(String accountName)`
Метод необходим для задания названия аккаунта в системе **Webim** при создании блока часто задаваемых вопросов.

**Важно:** для получения экземпляра **FAQ** вызов метода является обязательным.

### Параметры

`accountName` – название аккаунта клиента в системе **Webim**. Обычно представляет из себя URL-сервера (например, `https://demo.webim.ru`), но может иметь и вид названия аккаунта одним словом (например, `demo`), если сервер находится в домене `webim.ru`. Тип параметра – **String**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `FAQBuilder setApplication(String application)`
Метод необходим для задания названия приложения в системе **Webim** при создании блока часто задаваемых вопросов.

### Параметры

`application` – название приложения клиента в системе **Webim**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `FAQBuilder setContext(Context context)`

Метод необходим для установки **context** в системе **Webim** при создании блока часто задаваемых вопросов, который необходим для возможности записи кэша для категорий.

**Важно:** для получения экземпляра **FAQ** вызов метода является обязательным.

### Параметры

`context` – контекст. Тип параметра – **Context**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным контекстом.

## `FAQBuilder setDepartmentKey(String departmentKey)`
Метод необходим для задания ключа отдела в системе **Webim** при создании блока часто задаваемых вопросов.

### Параметры

`departmentKey` – ключ отдела в системе **Webim**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `FAQBuilder setLanguage(String language)`
Метод необходим для задания языка при создании блока часто задаваемых вопросов.

### Параметры

`language` – язык приложения.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `FAQ build()`
Метод, который вызывается в заключение перечисленных выше методов для получения экземпляра **FAQ**.

**Важно:** требует вызова методов **setAccountName(String accountName)** и **setContext(Context context)**. Также предварительно могут быть вызваны и любые другие (в любом порядке и сочетании) методы экземпляра класса **FAQBuilder**.

### Возвращаемое значение

Возвращает объект **FAQ** с установленными параметрами с помощью остальных методов экземпляра класса.

### Исключения

Может выбрасывать ошибки типа **FAQBuilderError**.

# перечисляемый тип FAQBuilderError
Значение типа соответствуют возможным ошибкам, которые могут возникнуть при вызове метода **build()** класса **FAQBuilder**.

Значение | Описание
---------|---------
**NIL_ACCOUNT_NAME** | Возникает, когда при создании блока часто задаваемых вопросов не было передано значение названия аккаунта (или это значение **null**)

# интерфейс FAQ
Интерфейс, позволяющий производить манипуляции с блоком часто задаваемых вопросов. Реализуется внутренними сущностями **SDK**.

Экземпляр класса **FAQ** получается с помощью методов класса **FAQBuilder**.

## `void resume()`
При создании экземпляра класса **FAQ**, соответствующий ему блок часто задаваемых вопросов находится в приостановленном состоянии. Данный метод необходим для того, чтобы стартовать сетевую активность. Необходим для полноценного функционирования сервиса в контексте приложения.

Скорость выполнения метода зависит от скорости получения ответа сервера.

### Исключения

Выбрасывает **IllegalStateException**, если объект блока часто задаваемых вопросов был деактивирован (см. метод **destroy()**).

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void pause()`
Метод, который используется для приостановки сетевой активности блока часто задаваемых вопросов. Если сессия уже находится в приостановленном состоянии, метод не производит никаких действий. Для вызова метода блок часто задаваемых вопросов не должен находиться в деактивированном состоянии.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void destroy()`
Метод, который используется для деактивации блока часто задаваемых вопросов и экземпляра класса. После вызова данного метода, никакие методы, относящиеся к блоку часто задаваемых вопросов использованы быть не могут.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void getStructure(String rootId, GetCallback<FAQStructure> callback)`

Метод, который используется для получения объекта класса **FAQStructure** через **GetCallback\<FAQStructure\>**. Если запрос завершился с ошибкой, то полученная структура будет равна **null**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`rootId` – **ID** вершины, которая будет корнем дерева (структуры) блока часто задаваемых вопросов. Тип – **String**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQStructure\>**.

## `void getCachedStructure(String rootId, GetCallback<FAQStructure> callback)`

Метод, который используется для получения объекта класса **FAQStructure** через **GetCallback\<FAQStructure\>** из кэша. Если запрос завершился с ошибкой, то полученная структура будет равна **null**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`rootId` – **ID** вершины, которая будет корнем дерева (структуры) блока часто задаваемых вопросов. Тип – **String**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQStructure\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void getCategory(String id, GetCallback<FAQCategory> callback)`
Метод, который используется для получения объекта класса **FAQCategory** через **GetCallback\<FAQCategory\>**. Если запрос завершился с ошибкой, то полученная категория будет равна **null**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** категории блока часто задаваемых вопросов. Тип – **String**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQCategory\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void getCategoriesForApplication(GetCallback<List<String>> callback)`

Метод, который используется для получения массива идентификаторов категорий, подходящих для заданных параметров, через **GetCallback\<List\<String\>\>**. Если запрос завершился с ошибкой, то полученный массив будет пустой.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`callback` – объект, реализующий интерфейс **GetCallback\<List\<String\>\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void getCachedCategory(String id, GetCallback<FAQCategory> callback)`

Метод, который используется для получения объекта класса **FAQCategory** через **callback** из сохранённого кэша. Если запрос завершился с ошибкой, то полученная категория будет равна **null**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** категории блока часто задаваемых вопросов. Тип – **String**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQCategory\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void getItem(String id, FAQItemSource openFrom, GetCallback<FAQItem> callback)`

Метод, который используется для получения объекта класса **FAQItem** через **GetCallback**. Если запрос завершился с ошибкой, то полученная страница будет равна **null**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** страницы блока часто задаваемых вопросов. Тип – **String**.

`openFrom` – запрос статьи из определённого источника. Тип – **FAQItemSource**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQItem\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void getCachedItem(String id, FAQItemSource openFrom, GetCallback<FAQItem> callback)`

Метод, который используется для получения объекта класса **FAQItem** через **GetCallback** из кэша. Если запрос завершился с ошибкой, то полученная страница будет равна **null**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** страницы блока часто задаваемых вопросов. Тип – **String**.

`openFrom` – запрос статьи из определённого источника. Тип – **FAQItemSource**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQItem\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.


## `void like(FAQItem item)`

Метод, который позволяет поставить отметку "нравится" для статьи.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`item` – страница, которой необходимо поставить оценку. Тип – **FAQItem**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void dislike(FAQItem item)`

Метод, который позволяет поставить отметку "не нравится" для статьи.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`item` – страница, которой необходимо поставить оценку. Тип – **FAQItem**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

## `void search(String query, String id, int limit, GetCallback<FAQSearchItem> callback)`

Метод, который позволяет найти статьи по ключевому слову.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`query` – запрос, по которому осуществляется поиск. Тип – **String**.

`id` – **id** категории, в которой осуществляется поиск. Тип – **String**.

`limit` – число, не больше которого нужно вернуть статей. Тип – **int**.

`callback` – объект, реализующий интерфейс **GetCallback\<FAQSearchItem\>**.

### Исключения

Выбрасывает **RuntimeException**, если метод был вызван из потока, отличного от того, в котором был создан объект класса.

# интерфейс GetCallback\<T\>
Интерфейс, методы которого реализуются каким-либо классом приложения.

## `void receive(T item)`

Метод вызывается при получении какого-либо объекта блока часто задаваемых вопросов.

### Параметры

`item` – какой-либо объект, полученный в ответе от сервера.

## `void onError()`

Метод вызывается в случае ошибки.

# интерфейс FAQCategory

Представление категории блока часто задаваемых вопросов. Предоставляет методы получения информации о категории.

Объекты **FAQCategory** могут быть получены с помощью класса, реализующего интерфейс **GetCategoryCallback**.


## `String getId()`

Возвращает идентификатор категории. Тип – **String**.

## `String getTitle()`

Возвращает заголовок категории. Тип – **String**.

## `List<FAQItems> getItems()`

Категория содержит страницы блока часто задаваемых вопросов.

Возвращает страницы, принадлежащих категории. Тип – **List<FAQItem\>**.

## `List<FAQCategoryInfo> getSubcategories()`
Категория содержит подкатегории. Для удобства данный метод возвращает информацию о подкатегориях без её страниц и подкатегорий.

Возвращает информацию о подкатегориях, принадлежащих категории. Тип – **List<FAQCategoryInfo\>**.

# интерфейс FAQCategoryInfo
Представление информации о категории блока часто задаваемых вопросов. Предоставляет методы получения идентификатора и заголовка категории.

Объекты **FAQCategoryInfo** могут быть получены с помощью метода **getSubcategories()**.

## `String getId()`

Возвращает идентификатор категории. Тип – **String**.

## `String getTitle()`

Возвращает заголовок категории. Тип – **String**.

# интерфейс FAQItem
Представление страницы блока часто задаваемых вопросов. Предоставляет методы получения информации о странице.

Объекты **FAQItem** могут быть получены с помощью класса, реализующего интерфейс **GetItemCallback**.

## `String getId()`

Возвращает идентификатор страницы. Тип – **String**.

## `String getTitle()`

Возвращает заголовок страницы. Тип – **String**.

## `List<String> getCategories()`
Страница может принадлежать нескольким категориям.

Возвращает идентификаторы категорий, которым принадлежи страница. Тип – List\<String\>.

## `List<String> метод getTags()`
У страницы есть набор тэгов.

Возвращает список тэгов, которыми отмечена страница. Тип – **List\<String\>**.

## `String getContent()`

Возвращает содержание страницы. Тип – **String**.

## `int getLikeCount()`
Страница содержит количество отметок "Нравится".

Возвращает количество отметок "Нравится" страницы. Тип – **int**.

## `int getDislikeCount()`
Страница содержит количество отметок "Не нравится".

Возвращает количество отметок "Не нравится" страницы. Тип – **int**.

## `UserRate getUserRate()`
Страница может быть отмечена пользователем.

Возварщает оценку пользователя. Тип – **UserRate**.

# перечисляемый тип UserRate
Страница может быть отмечена пользователем.

Значение | Описание
-|-
LIKE | Пользователю понравилась страница
DISLIKE | Пользователю не понравилась страница
NO_RATE | Страница не оценена пользователем

# интерфейс FAQSearchItem
Краткая информация о страницах, полученных в результате поиска по ключевому слову.

## `String getID()`

Возвращает идентификатор страницы. Тип – **String**.


## `String getTitle()`

Возвращает заголовок страницы. Тип – **String**.


## `double getScore()`
У страницы есть оценка поиска. Чем больше оценка, тем больше страница подходит под поисковой запрос.

Возвращает оценку поиска. Тип – **double**.

# интерфейс FAQStructure
Представление дерева (структуры) блока часто задаваемых вопросов. Предоставляет методы получения информации о дереве блока часто задаваемых вопросов.

Объекты **FAQStructure** могут быть получены с помощью класса, реализующего интерфейс **GetStructureCallback**.


## `String getId()`
У дерева есть корневой элемент.

Возвращает идентификатор корневого элемента дерева. Тип – **String**.

## `String getTitle()`

Возвращает заголовок корня. Тип – **String**.

## `FAQType getType()`
Корень дерева может быть категорией или страницей.

Возвращает тип корневого элемента. Тип – **FAQType**.

## `List<FAQStructure> getChildren()`

Возвращает поддеревья, корнями которых являются прямые потомки корня дерева (структуры). Тип – **List\<FAQStructure\>**.

# перечисляемый тип FAQType
Возможные типы корня дерева блока часто задаваемых вопросов (см. метод **getType()** интерфейса **FAQStructure**).

Значение | Опсиание
-|-
ITEM | Корень дерева является страницей
CATEGORY | Корень дерева является категорией
UNKNOWN | Корень дерева имеет неизвестный тип для данной версии SDK

# перечисляемый тип FAQItemSource
Возможный источник статьи. Статья может быть взята из поиска или из структуры или категории.

Значение | Описание
---------|---------
SEARCH | Статью запрашивают из поиска
TREE | Статью запрашивают из структуры или категории
